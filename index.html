<!DOCTYPE html>
<html>
<head>
    <title>Nostr Event Test</title>
    <script src="dist/nostr-bundle.js"></script>
    <script>
        async function main() {
            await Nostr.loadWasmAsync();
            
            // Generate new random keys
            let keys = Nostr.Keys.generate();

            console.log("Public key (hex): ", keys.publicKey.toHex());
            console.log("Secret key (hex): ", keys.secretKey.toHex());
            console.log("Public key (bech32): ", keys.publicKey.toBech32());
            console.log("Secret key (bech32): ", keys.secretKey.toBech32());


            
            let event = new Nostr.EventBuilder(1, "Testing nostr JS bindings", [Nostr.Tag.parse(["p", "d0a59cd44b6051708e9d437aa01f86451378a130ea7ba38ad43eae0bd0e0c4ce"])]).toEvent(keys);
            console.log(event.asJson()); // Print event as JSON
            console.log(event.tags[0].toVec()); // Print first tag

            // Custom created at
            let customTimestamp = Nostr.Timestamp.fromSecs(12345);
            let e = Nostr.EventBuilder.textNote("Event with custom timestamp", []).customCreatedAt(customTimestamp).toEvent(keys);
            console.log(e.asJson());
        }

        main();
    </script>
</head>
<body>
    <h1>Nostr Event Test</h1>
</body>
</html>
